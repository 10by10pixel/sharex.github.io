---
layout: default
---

<nav class="navbar navbar-main navbar-compact">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="{{ site.url }}">Home</a></li>
                <li class="active"><a href="#">Callback</a></li>
                <li><a href="http://imgur.com/a/7TDhO">Screenshots</a></li>
                <li><a href="https://www.youtube.com/watch?v=NB32QYt8WfI">Video</a></li>
                <li><a href="{{ site.url }}/features/">Features</a></li>
                <li><a href="{{ site.url }}/changelog/">Changelog</a></li>
                <li><a href="https://github.com/ShareX/CustomUploaders">Custom uploaders</a></li>
                <li><a href="https://github.com/ShareX/ShareX">GitHub</a></li>
                <li><a href="https://webchat.freenode.net/?channels=%23ShareX" title="#ShareX on irc.freenode.net">IRC</a></li>
                <li><a href="http://store.steampowered.com/app/400040/">Steam</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="jumbotron jumbotron-compact">
    <div class="container">
        <h1>
            <a href="/">ShareX</a>
        </h1>
        <p>Authorization</p>
    </div>
</div>

<div class="container-callback">
    <div class="container">
        <div id="panel-callback" class="panel panel-primary">
            <div class="panel-heading">
                <span id="title" />
            </div>
            <div class="panel-body">
                <div id="callback-code" class="input-group">
                    <input id="code" type="text" class="form-control" onfocus="this.select()" />
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" data-clipboard-target="#code">Copy to clipboard</button>
                    </span>
                </div>
                <span id="callback-error" />
            </div>
        </div>
    </div>
</div>

<script src="{{ site.url }}/js/jquery.min.js"></script>
<script src="{{ site.url }}/js/bootstrap.min.js"></script>
<script src="{{ site.url }}/js/clipboard.min.js"></script>

<script>
    $(document).ready(function() {
        var code = GetParameterByName("code");

        if (!code) {
            code = GetParameterByName("oauth_verifier");
        }

        if (code) {
            $("#panel-callback").addClass("panel-success");
            $("#title").text("Please paste following code in ShareX");
            $("#code").val(code);
        } else {
            var error = GetParameterByName("error");

            if (error) {
                $("#panel-callback").addClass("panel-danger");
                $("#title").text("ShareX is not properly authorized");
                $("#callback-error").text("Error: " + error);
            } else {
                $("#panel-callback").addClass("panel-warning");
                $("#title").text("Invalid access");
                $("#callback-error").text("Unexpected error occured.");
            }

            $("#callback-code").hide();
            $("#callback-error").show();
        }

        var clipboard = new Clipboard(".btn");

        clipboard.on("success", function(e) {
            $("#callback-code .btn").text("Copied!");
        });

        clipboard.on("error", function(e) {
            $("#callback-code .btn").text("Copy failed.");
        });
    });

    function GetParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
</script>